 {
 "variables":{
	"aws_access_key": "AKIAIMIMOYIW4373X3YQ",
    	"aws_secret_key": "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"
	},
  "provisioners": [  
  {
	"type": "shell",
	"inline": [
		"sudo yum -y install wget unzip",
		"export PATH=/usr/local/bin:/usr/bin:$PATH",
		"export AWS_ACCESS_KEY_ID=AKIAIMIMOYIW4373X3YQ",
		"export AWS_SECRET_ACCESS_KEY=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",
		"echo ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~",
		"echo Current Login User",
		"echo `whoami`",
		"echo `who`",
		"echo ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"
		
		]
  }
],
 "builders": [
	{
    "type": "amazon-ebs",
    "access_key": "AKIAIMIMOYIW4373X3YQ",
    "secret_key": "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",
    "region": "eu-west-1",
    "vpc_id": "vpc-7bf29c1f",
    "subnet_id":"subnet-a4a0e8c0",
    "security_group_id": "sg-5760a12d",
    "source_ami": "ami-c90195b0",
    "instance_type": "t2.micro",
    "ssh_interface": "private_ip",
    "ssh_username": "ec2-user",
    "ssh_keypair_name": "israr-sandpit-key",
    "ssh_private_key_file": "./Packer/israr-sandpit-key.pem",
    "ami_name": "packer-linux {{isotime \"02-Jan-06 03-04 am\"}}",
	"tags": {
		"Name":"Packer Linux AMI",
		"Business Unit":"Enterprise"
	},
	"ami_description": "RHEL with Ansible,AWS Inspector Agent,AWS CLI,AWS CloudWatch Monitoring Scripts,AWS SSM Agent and Cloudwatch Logs agent",
  "associate_public_ip_address": "false"
    
	}
  ]
}
